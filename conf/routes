# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Static pages
GET           /api                                              controllers.StaticController.api

# Statistics API
GET           /api/stats/reports/count                          controllers.StatisticController.getReportsCount()
GET           /api/stats/reports/curve                          controllers.StatisticController.getReportsCountCurve()
GET           /api/stats/reports/delay/responsed                controllers.StatisticController.getDelayReportResponseInHours(companyId: Option[java.util.UUID])
GET           /api/stats/reports/delay/read                     controllers.StatisticController.getDelayReportReadInHours(companyId: Option[java.util.UUID])
GET           /api/stats/reports/tags                           controllers.StatisticController.getReportsTagsDistribution(companyId: Option[java.util.UUID])
GET           /api/stats/reports/status                         controllers.StatisticController.getReportsStatusDistribution(companyId: Option[java.util.UUID])
GET           /api/stats/reports/reviews                        controllers.StatisticController.getReportResponseReviews(companyId: Option[java.util.UUID])
GET           /api/stats/reports/pro-transmitted                controllers.StatisticController.getProReportTransmittedStat(ticks: Option[Int])
GET           /api/stats/reports/pro-response                   controllers.StatisticController.getProReportResponseStat(ticks: Option[Int], responseStatusQuery: Option[List[ReportResponseType]])
GET           /api/stats/pro-account-rate                      controllers.CompanyAccessController.proFirstActivationCount(ticks: Option[Int])
GET           /api/stats/dgccrf-account                         controllers.StatisticController.dgccrfAccountsCurve(ticks: Option[Int])
GET           /api/stats/dgccrf-active-account                  controllers.StatisticController.dgccrfActiveAccountsCurve(ticks: Option[Int])
GET           /api/stats/dgccrf-subscriptions                   controllers.StatisticController.dgccrfSubscription(ticks: Option[Int])
GET           /api/stats/dgccrf-controls                        controllers.StatisticController.dgccrfControlsCurve(ticks: Option[Int])
GET           /api/reports/count-by-departments                 controllers.StatisticController.countByDepartments()


# Reports list API
GET           /api/reports                                      controllers.ReportListController.getReports()
POST          /api/reports/extract                              controllers.ReportListController.extractReports()

# Report API
GET           /api/reports/files/:uuid/:filename                controllers.ReportController.downloadReportFile(uuid, filename)
DELETE        /api/reports/files/:uuid/:filename                controllers.ReportController.deleteReportFile(uuid, filename)
POST          /api/reports/files                                controllers.ReportController.uploadReportFile()

GET           /api/reports/:uuid                                controllers.ReportController.getReport(uuid)
GET           /api/reports/:uuid/download                       controllers.ReportController.reportAsPDF(uuid)
DELETE        /api/reports/:uuid                                controllers.ReportController.deleteReport(uuid)

POST          /api/reports                                      controllers.ReportController.createReport()
POST          /api/reports/:uuid/response                       controllers.ReportController.reportResponse(uuid)
POST          /api/reports/:uuid/response/review                controllers.ReportConsumerReviewController.reviewOnReportResponse(uuid)
GET           /api/reports/:uuid/response/review                controllers.ReportConsumerReviewController.getReview(uuid)
POST          /api/reports/:uuid/company                        controllers.ReportController.updateReportCompany(uuid)
POST          /api/reports/:uuid/consumer                       controllers.ReportController.updateReportConsumer(uuid)
POST          /api/reports/:uuid/action                         controllers.ReportController.createReportAction(uuid)
GET           /api/reports/:uuid/events                         controllers.EventsController.getReportEvents(uuid: java.util.UUID, eventType: Option[String])
GET           /api/companies/:siret/events                      controllers.EventsController.getCompanyEventsWithUser(siret: SIRET, eventType: Option[String])

# Report API for externals SI
GET           /api/ext/reports/siret/:siret                     controllers.ReportToExternalController.searchReportsToExternalBySiret(siret: String)
GET           /api/ext/reports/extract                          controllers.DataEconomieController.reportDataEcomonie()
GET           /api/ext/reports                                  controllers.ReportToExternalController.searchReportsToExternal()
GET           /api/ext/v2/reports                               controllers.ReportToExternalController.searchReportsToExternalV2()
GET           /api/ext/reports/:uuid                            controllers.ReportToExternalController.getReportToExternal(uuid)

# Admin API

GET           /api/admin/test-email                             controllers.AdminController.getEmailCodes()
POST          /api/admin/test-email                             controllers.AdminController.sendTestEmail(templateRef, to)
POST          /api/admin/emails/proAckToConsumer                controllers.AdminController.sendProAckToConsumer()
POST          /api/admin/emails/newReportToPro                  controllers.AdminController.sendNewReportToPro()

# Async files API
GET           /api/async-files                                  controllers.AsyncFileController.listAsyncFiles(kind: Option[String])

# Events API

# Constants API
GET           /api/constants/countries                          controllers.ConstantController.getCountries()

# Authentication API
POST          /api/authenticate                                 controllers.AuthController.authenticate()
POST          /api/authenticate/password/forgot                 controllers.AuthController.forgotPassword()
POST          /api/authenticate/password/reset                  controllers.AuthController.resetPassword(token: java.util.UUID)
POST          /api/account/password                             controllers.AuthController.changePassword()

# Enterprises sync
POST          /api/enterprises-sync/start-etablissement         controllers.EnterpriseImportController.startEtablissementFile()
POST          /api/enterprises-sync/start-unitelegale           controllers.EnterpriseImportController.startUniteLegaleFile()
POST          /api/enterprises-sync/cancel                      controllers.EnterpriseImportController.cancelAllFiles()
POST          /api/enterprises-sync/cancel-etablissement        controllers.EnterpriseImportController.cancelEtablissementFile()
POST          /api/enterprises-sync/cancel-unitelegale          controllers.EnterpriseImportController.cancelUniteLegaleFile()
GET           /api/enterprises-sync/info                        controllers.EnterpriseImportController.getSyncInfo()

# Accesses API
GET           /api/accesses/connected-user                      controllers.CompanyAccessController.myCompanies()
GET           /api/accesses/:siret                              controllers.CompanyAccessController.listAccesses(siret: String)
GET           /api/accesses/:siret/pending                      controllers.CompanyAccessController.listPendingTokens(siret: String)
PUT           /api/accesses/:siret/:userId                      controllers.CompanyAccessController.updateAccess(siret: String, userId: java.util.UUID)
DELETE        /api/accesses/:siret/:userId                      controllers.CompanyAccessController.removeAccess(siret: String, userId: java.util.UUID)
GET           /api/accesses/:siret/token                        controllers.CompanyAccessController.fetchTokenInfo(siret: String, token: String)
POST          /api/accesses/:siret/send-activation-link         controllers.CompanyAccessController.sendActivationLink(siret: String)
POST          /api/accesses/:siret/token/accept                 controllers.CompanyAccessController.acceptToken(siret: String)
DELETE        /api/accesses/:siret/token/:tokenId               controllers.CompanyAccessController.removePendingToken(siret: String, tokenId: java.util.UUID)
POST          /api/accesses/grouped/invitations                 controllers.CompanyAccessController.sendGroupedInvitations()
POST          /api/accesses/:siret/invitation                   controllers.CompanyAccessController.sendInvitation(siret: String)

# Account API
GET           /api/account                                      controllers.AccountController.fetchUser
GET           /api/account/token                                controllers.AccountController.fetchTokenInfo(token: String)
POST          /api/account/activation                           controllers.AccountController.activateAccount()
POST          /api/account/dgccrf/invitation                    controllers.AccountController.sendDGCCRFInvitation()
GET           /api/account/dgccrf/pending                       controllers.AccountController.fetchPendingDGCCRF()
GET           /api/account/dgccrf/users                         controllers.AccountController.fetchDGCCRFUsers()
POST          /api/account/validate-email                       controllers.AccountController.validateEmail()

# EmailValidation API
POST          /api/email/check                                  controllers.EmailValidationController.checkEmail()
POST          /api/email/validate                               controllers.EmailValidationController.validEmail()

# Company details API
POST          /api/companies                                    controllers.CompanyController.create()
GET           /api/companies                                    controllers.CompanyController.searchRegistered()
GET           /api/companies/connected-user                     controllers.CompanyController.visibleCompanies()
GET           /api/companies/to-activate                        controllers.CompanyController.companiesToActivate()
GET           /api/companies/hosts/:companyId                   controllers.CompanyController.fetchHosts(companyId: java.util.UUID)
POST          /api/companies/activation-document                controllers.CompanyController.getActivationDocument()
POST          /api/companies/companies-posted                   controllers.CompanyController.confirmContactByPostOnCompanyList()
GET           /api/companies/search/:identity                   controllers.CompanyController.searchCompanyByIdentity(identity: String)
GET           /api/companies/search-url                         controllers.CompanyController.searchCompanyByWebsite(url: String)
GET           /api/companies/search                             controllers.CompanyController.searchCompany(q: String, postalCode: String)
GET           /api/companies/:siret                             controllers.CompanyController.companyDetails(siret)
PUT           /api/companies/:id/address                        controllers.CompanyController.updateCompanyAddress(id: java.util.UUID)
GET           /api/companies/:id/response-rate                  controllers.CompanyController.getResponseRate(id: java.util.UUID)
POST          /api/companies/:siret/undelivered-document        controllers.CompanyController.handleUndeliveredDocument(siret)

# Rating API
POST          /api/rating                                       controllers.RatingController.rate()

# Subscription API
GET           /api/subscriptions                                controllers.SubscriptionController.getSubscriptions()
POST          /api/subscriptions                                controllers.SubscriptionController.createSubscription()
PUT           /api/subscriptions/:subscriptionId                controllers.SubscriptionController.updateSubscription(subscriptionId: java.util.UUID)
GET           /api/subscriptions/:subscriptionId                controllers.SubscriptionController.getSubscription(subscriptionId: java.util.UUID)
DELETE        /api/subscriptions/:subscriptionId                controllers.SubscriptionController.removeSubscription(subscriptionId: java.util.UUID)

# Websites API
GET           /api/websites                                     controllers.WebsiteController.fetchWithCompanies(host: Option[String], kinds: Option[Seq[WebsiteKind]], offset: Option[Long], limit: Option[Int])
GET           /api/websites/search-url                          controllers.WebsiteController.searchByHost(url: String)
GET           /api/websites/unregistered                        controllers.WebsiteController.fetchUnregisteredHost(q: Option[String], start: Option[String], end: Option[String])
GET           /api/websites/unregistered/extract                controllers.WebsiteController.extractUnregisteredHost(q: Option[String], start: Option[String], end: Option[String])
PUT           /api/websites/:id/company                         controllers.WebsiteController.updateCompany(id: java.util.UUID)
PUT           /api/websites/:id/country                         controllers.WebsiteController.updateCompanyCountry(id: java.util.UUID, companyCountry : String)
PUT           /api/websites/:id                                 controllers.WebsiteController.updateWebsiteKind(id: java.util.UUID, kind :WebsiteKind)
DELETE        /api/websites/:id                                 controllers.WebsiteController.remove(id: java.util.UUID)

# Reported phones API
GET           /api/reported-phones                              controllers.ReportedPhoneController.fetchGrouped(q: Option[String], start: Option[String], end: Option[String])
GET           /api/reported-phones/extract                      controllers.ReportedPhoneController.extractPhonesGroupBySIRET(q: Option[String], start: Option[String], end: Option[String])

# Report notifications block list API
GET           /api/report-blocked-notification                  controllers.ReportBlockedNotificationController.getAll()
POST          /api/report-blocked-notification                  controllers.ReportBlockedNotificationController.create()
POST          /api/report-blocked-notification/delete           controllers.ReportBlockedNotificationController.delete()

GET           /assets/*file                                     controllers.Assets.versioned(path="/public", file: Asset)
